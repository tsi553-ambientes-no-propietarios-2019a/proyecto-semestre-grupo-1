{% extends 'base.html.twig' %}

{% block body %}







{% if app.request.hasPreviousSession %}
    {% for type, messages in app.session.flashbag.all() %}
        {% for message in messages %}
            <div class="flash-{{ type }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}
{% endif %}

<div>
    {% block fos_user_content %}
    {% endblock fos_user_content %}
</div>
{% endblock body %}

{% block javascripts %}
    <script>
        $("#fos_user_registration_form_country").change(function() {
            var data = {
                country_id: $(this).val()
            };

            $.ajax({
                type: 'post',
                url: '{{ path("cities_by_country") }}',
                data: data,
                success: function(data) {
                    var $city_selector = $('#fos_user_registration_form_city');

                    $city_selector.html('<option>Selecciona...</option>');

                    for (var i = 0, total = data.length; i < total; i++) {
                        $city_selector.append('<option value="' + data[i].id + '">' + data[i].name + '</option>');
                    }
                }
            });
        });
    </script>
{% endblock javascripts %}